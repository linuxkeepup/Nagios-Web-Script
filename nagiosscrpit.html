<!DOCTYPE html>
<html>
<head>
    <title>Nagios Host Config Generator</title>
</head>
<body>
    <h2>Nagios Host Config Generator</h2>
    <form id="nagios-form">
        <label for="host_names">Host Names (comma-separated):</label><br>
        <textarea id="host_names" name="host_names" rows="4" cols="50"></textarea><br><br>
        
        <label for="addresses">Addresses (comma-separated):</label><br>
        <textarea id="addresses" name="addresses" rows="4" cols="50"></textarea><br><br>
        
        <label for="alias">Alias:</label><br>
        <input type="text" id="alias" name="alias"><br><br>
        
        <label for="hostgroups">Host Group:</label><br>
        <input type="text" id="hostgroups" name="hostgroups"><br><br>
        
        <label for="base_path">Base Path:</label><br>
        <input type="text" id="base_path" name="base_path" value="/usr/local/nagios/etc/objects/Beximco"><br><br>
        
        <input type="button" value="Generate Scripts" onclick="generateScripts()">
    </form>
    
    <h3>Generated Scripts:</h3>
    <div id="output"></div>
    
    <h3>Generated File Paths:</h3>
    <div id="file-links"></div>
    
    <script>
        function generateScripts() {
            const hostNames = document.getElementById('host_names').value.split(',');
            const addresses = document.getElementById('addresses').value.split(',');
            const alias = document.getElementById('alias').value;
            const hostgroups = document.getElementById('hostgroups').value;
            const basePath = document.getElementById('base_path').value;
            const output = document.getElementById('output');
            const fileLinks = document.getElementById('file-links');
            
            output.innerHTML = '';
            fileLinks.innerHTML = '';
            
            if (hostNames.length !== addresses.length) {
                alert('The number of host names and addresses must match.');
                return;
            }
            
            for (let i = 0; i < hostNames.length; i++) {
                const hostName = hostNames[i].trim();
                const address = addresses[i].trim();
                
                const hostConfig = `# Define the switch that we'll be monitoring

define host {

    use                     generic-switch             
    host_name               ${hostName}   
    alias                   ${alias}                     
    address                 ${address}            
    hostgroups              ${hostgroups}                   
}



# Create a service to PING to switch

define service {

    use                     generic-service                
    host_name               ${hostName}       
    service_description     PING                           
    check_command           check_ping!200.0,20%!600.0,60% 
    check_interval          5                              
    retry_interval          1                              
}`;

                const echoCommand = `(cd ${basePath}/${hostgroups} && echo '${hostConfig.replace(/'/g, "'\\''")}' > ${hostName}.cfg)`;
                output.innerHTML += `<pre>${echoCommand}</pre>`;
                
                const filePath = `cfg_file=${basePath}/${hostgroups}/${hostName}.cfg`;
                const fileLink = document.createElement('a');
                fileLink.href = `file://${filePath}`;
                fileLink.target = '_blank';
                fileLink.textContent = filePath;
                fileLinks.appendChild(fileLink);
                fileLinks.appendChild(document.createElement('br'));
            }
        }
    </script>
</body>
</html>
